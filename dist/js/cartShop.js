require.config({paths:{jquery:"../libs/jquery",head:"head"}}),require(["jquery","head"],function(t,e){t(function(){e.head();var s=localStorage.lists?JSON.parse(localStorage.lists):[],c=0,a=0;t.each(s,function(e,i){var r=s[e].price1.split("￥")[1],n=parseInt(r)*s[e].count,l=JSON.stringify(n);c+=s[e].count*parseInt(s[e].price1.split("￥")[1]),t(".cart_w table tbody").append('<tr class="cars"><td class="messages messages1"><input type="checkbox" checked="checked" class="inp"></td><td class="messages"><a href="http://www.5lux.com/good/detail/2766282"><img src="'+s[e].src2+'" alt=""></a></td><td class="messages" style="width: 200px;"><a href="http://www.5lux.com/good/detail/2766282">'+s[e].name+'</a></td><td class="messages">黑色,35</td><td class="messages">'+s[e].price1+'.00</td><td class="messages"><p><a href="###" class="btns_r"></a><input type="text" value="'+s[e].count+'" class="val"><a href="###" class="btns_l"></a></p></td><td class="messages"></td><td class="messages price">￥'+l+'</td><td class="messages operate"><a href="###" class="delete">删除</a><a href="###">移入收藏夹</a><a href="###" class="box"><b></b>定制包装</a></td></tr>'),t(".textm strong").html("￥"+c),a+=parseInt(s[e].count),t(".number").html(""+a)});var i=0;t.each(t(".btns_r"),function(e,c){t(this).click(function(){s[e].count++;var c=JSON.stringify(s);localStorage.lists=c;var a=s[e].price1.split("￥")[1],r=parseInt(a)*s[e].count;i=parseInt(t(".textm strong").text().split("￥")[1])+parseInt(s[e].price1.split("￥")[1]),t(this).next().attr("value",s[e].count),t(this).parent().parent().siblings(".price").html("￥"+r),t(".textm strong").html("￥"+i)})}),t.each(t(".btns_l"),function(e,c){t(this).click(function(){if(t(this).prev().val()<=0)t(this).prev().attr("value","0");else if(t(".val").val()>0){s[e].count--;var c=JSON.stringify(s);localStorage.lists=c;var a=s[e].price1.split("￥")[1],r=parseInt(a)*s[e].count;return i=parseInt(t(".textm strong").text().split("￥")[1])-parseInt(s[e].price1.split("￥")[1]),t(this).prev().attr("value",s[e].count),t(this).parent().parent().siblings(".price").html("￥"+r),void t(".textm strong").html("￥"+i)}})}),t.each(t(".delete"),function(e,c){var a=0;t(this).click(function(){var c=[],i=t(".price").text().split("￥")[e+1];c.push(i),a=parseInt(t(".textm strong").text().split("￥")[1])-parseInt(c),console.log(a),t(".textm strong").html("￥"+a),s.splice(this.index,1);var r=JSON.stringify(s);localStorage.lists=r,t(this).parent().parent().remove()})}),t(".select input").click(function(){1==t(this).is(":checked")?(t(".messages1 .inp").prop("checked",!0),t(".account_l input").prop("checked",!0)):0==t(this).is(":checked")&&(t(".messages1 .inp").prop("checked",!1),t(".account_l input").prop("checked",!1))}),t(".account_l input").click(function(){1==t(this).is(":checked")?(t(".messages1 .inp").prop("checked",!0),t(".select input").prop("checked",!0)):0==t(this).is(":checked")&&(t(".messages1 .inp").prop("checked",!1),t(".select input").prop("checked",!1))}),t.each(t(".inp"),function(e,s){e<=0&&(1==t(".inp").is(":checked")?t(".account_l input").prop("checked",!0):0==t(".inp").is(":checked")&&t(".account_l input").prop("checked",!1))}),t(".clear").click(function(){t(".cars").remove(),t(".textm strong").html("0"),localStorage.clear()})})});